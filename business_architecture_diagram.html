<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Architecture Diagram</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 28px;
        }
        
        .diagram {
            position: relative;
            width: 100%;
            height: 800px;
            margin: 20px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .component {
            position: absolute;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
            font-size: 14px;
            line-height: 1.2;
        }
        
        .component:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        /* Component styles */
        .shopify {
            top: 50px;
            left: 50px;
            width: 180px;
            height: 80px;
            background: linear-gradient(135deg, #3498db, #2980b9);
        }
        
        .shokz-sdk {
            top: 180px;
            left: 50px;
            width: 180px;
            height: 80px;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }
        
        .cdp {
            top: 100px;
            left: 400px;
            width: 200px;
            height: 100px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            font-size: 13px;
        }
        
        .data-warehouse {
            top: 100px;
            left: 700px;
            width: 150px;
            height: 80px;
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }
        
        .aftership {
            top: 320px;
            left: 30px;
            width: 160px;
            height: 60px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .loyalty {
            top: 400px;
            left: 30px;
            width: 160px;
            height: 60px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .tnpl {
            top: 480px;
            left: 30px;
            width: 160px;
            height: 60px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .klaviyo {
            top: 300px;
            left: 400px;
            width: 180px;
            height: 80px;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }
        
        .bi-tools {
            top: 300px;
            left: 700px;
            width: 150px;
            height: 80px;
            background: linear-gradient(135deg, #34495e, #2c3e50);
        }
        
        /* Arrows */
        .arrow {
            position: absolute;
            z-index: 5;
        }
        
        .arrow::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
        }
        
        /* Main flow arrows */
        .arrow1 {
            top: 90px;
            left: 230px;
            width: 170px;
            height: 3px;
            background: #2c3e50;
        }
        
        .arrow1::before {
            right: -8px;
            top: -5px;
            border-left: 8px solid #2c3e50;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
        }
        
        .arrow2 {
            top: 220px;
            left: 230px;
            width: 170px;
            height: 3px;
            background: #2c3e50;
        }
        
        .arrow2::before {
            right: -8px;
            top: -5px;
            border-left: 8px solid #2c3e50;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
        }
        
        /* CDP to Data Warehouse */
        .arrow3 {
            top: 140px;
            left: 600px;
            width: 100px;
            height: 2px;
            background: #95a5a6;
            border-top: 2px dashed #95a5a6;
        }
        
        .arrow3::before {
            right: -6px;
            top: -4px;
            border-left: 6px solid #95a5a6;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
        }
        
        /* Event sync arrows */
        .arrow4 {
            top: 260px;
            left: 110px;
            width: 3px;
            height: 60px;
            background: #f39c12;
            transform: rotate(45deg);
            transform-origin: top;
        }
        
        .arrow5 {
            top: 340px;
            left: 110px;
            width: 3px;
            height: 60px;
            background: #f39c12;
            transform: rotate(35deg);
            transform-origin: top;
        }
        
        .arrow6 {
            top: 420px;
            left: 110px;
            width: 3px;
            height: 80px;
            background: #f39c12;
            transform: rotate(25deg);
            transform-origin: top;
        }
        
        /* CDP to downstream */
        .arrow7 {
            top: 200px;
            left: 500px;
            width: 3px;
            height: 100px;
            background: #9b59b6;
        }
        
        .arrow7::before {
            bottom: -8px;
            left: -5px;
            border-top: 8px solid #9b59b6;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
        }
        
        .arrow8 {
            top: 200px;
            left: 600px;
            width: 100px;
            height: 3px;
            background: #3498db;
            transform: rotate(45deg);
            transform-origin: left;
        }
        
        .arrow8::before {
            right: -8px;
            top: -5px;
            border-left: 8px solid #3498db;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
        }
        
        /* Annotations */
        .annotation {
            position: absolute;
            background: rgba(255,255,255,0.9);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-style: italic;
            color: #2c3e50;
            border: 1px solid #bdc3c7;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .deep-link {
            top: 280px;
            left: 250px;
        }
        
        .event-sync {
            top: 380px;
            left: 250px;
            transform: rotate(15deg);
        }
        
        .reach-segment {
            top: 420px;
            left: 600px;
        }
        
        .kpi-visual {
            top: 420px;
            left: 750px;
        }
        
        /* Legend */
        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .legend-line {
            width: 30px;
            height: 3px;
            margin-right: 10px;
        }
        
        .legend-line.main { background: #2c3e50; }
        .legend-line.event { background: #f39c12; }
        .legend-line.marketing { background: #9b59b6; }
        .legend-line.analytics { background: #3498db; }
        .legend-line.optional { 
            background: #95a5a6; 
            border-top: 2px dashed #95a5a6;
            height: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Business Architecture Diagram</h1>
        
        <div class="diagram">
            <!-- Components -->
            <div class="component shopify">Shopify<br>Storefront</div>
            <div class="component shokz-sdk">Shokz App<br>SDK</div>
            <div class="component cdp">CDP:<br>Events/Profiles/<br>Identity</div>
            <div class="component data-warehouse">Data Warehouse<br>(可选)</div>
            <div class="component aftership">AfterShip<br>(Trade-in)</div>
            <div class="component loyalty">Loyalty &<br>Referrals</div>
            <div class="component tnpl">TNPL<br>Provider</div>
            <div class="component klaviyo">Klaviyo<br>ESP/SMS</div>
            <div class="component bi-tools">BI/Looker/<br>GA4</div>
            
            <!-- Arrows -->
            <div class="arrow arrow1"></div>
            <div class="arrow arrow2"></div>
            <div class="arrow arrow3"></div>
            <div class="arrow arrow4"></div>
            <div class="arrow arrow5"></div>
            <div class="arrow arrow6"></div>
            <div class="arrow arrow7"></div>
            <div class="arrow arrow8"></div>
            
            <!-- Annotations -->
            <div class="annotation deep-link">Deep Link / QR</div>
            <div class="annotation event-sync">事件/状态同步</div>
            <div class="annotation reach-segment">触达/分群</div>
            <div class="annotation kpi-visual">KPI 可视化</div>
            
            <!-- Legend -->
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-line main"></div>
                    <span>主要数据流</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line event"></div>
                    <span>事件同步</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line marketing"></div>
                    <span>营销触达</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line analytics"></div>
                    <span>数据分析</span>
                </div>
                <div class="legend-item">
                    <div class="legend-line optional"></div>
                    <span>可选连接</span>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
            <h3 style="color: #2c3e50; margin-bottom: 15px;">架构说明：</h3>
            <ul style="color: #34495e; line-height: 1.6;">
                <li><strong>数据源层：</strong>Shopify Storefront 和 Shokz App SDK 作为主要的客户数据来源</li>
                <li><strong>数据中台：</strong>CDP (Customer Data Platform) 统一管理事件、用户画像和身份识别</li>
                <li><strong>业务系统：</strong>AfterShip、Loyalty & Referrals、TNPL Provider 等业务系统通过事件同步集成</li>
                <li><strong>营销触达：</strong>Klaviyo ESP/SMS 基于 CDP 数据进行精准营销和用户分群</li>
                <li><strong>数据分析：</strong>BI/Looker/GA4 提供 KPI 可视化和业务洞察</li>
                <li><strong>数据仓库：</strong>可选的数据存储层，用于长期数据保存和复杂分析</li>
            </ul>
        </div>
    </div>
</body>
</html>